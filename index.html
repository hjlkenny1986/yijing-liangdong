<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å‘¨æ˜“æœ‰ç­”æ¡ˆ - è¯¦ç»†æ‰‹å†Œ</title>
    <style>
        :root { --p: #37352f; --bg: #ffffff; --s-bg: #f7f6f3; --accent: #a44d11; }
        body { font-family: system-ui; color: var(--p); background: var(--bg); margin: 0; padding: 0; line-height: 1.6; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        #home, #list, #detail { display: none; }
        .active { display: block !important; }
        
        /* æŒ‰é’®ä¸å¡ç‰‡ */
        .btn { display: block; width: 100%; padding: 15px; margin: 15px 0; border: 1px solid #ddd; border-radius: 10px; background: var(--s-bg); text-align: center; font-size: 1.1rem; cursor: pointer; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .card { padding: 10px; border: 1px solid #eee; text-align: center; border-radius: 8px; font-size: 0.9rem; }
        
        /* è¯¦æƒ…å†…å®¹ */
        .section { margin: 20px 0; padding: 15px; background: var(--s-bg); border-radius: 10px; }
        .section h3 { margin-top: 0; color: var(--accent); border-bottom: 1px solid #ddd; padding-bottom: 5px; }
        .yao-item { padding: 10px 0; border-bottom: 1px dashed #ccc; font-size: 0.95rem; }
        textarea { width: 100%; height: 120px; padding: 10px; box-sizing: border-box; border-radius: 8px; border: 1px solid #ddd; margin: 10px 0; }
        .save-btn { width: 100%; padding: 12px; background: var(--p); color: white; border: none; border-radius: 8px; }
        .nav { text-align: center; margin: 30px 0; color: #888; text-decoration: underline; cursor: pointer; }
    </style>
</head>
<body>
<div class="container">
    <div id="home" class="active">
        <h1 style="text-align:center; margin-top:50px;">â˜¯ï¸ å‘¨æ˜“æœ‰ç­”æ¡ˆ</h1>
        <p style="text-align:center; color:#666;">æ¢å†¬è§†è§’ Â· è¯¦ç»†å®æˆ˜ç¬”è®°</p>
        <div onclick="showRandom()" class="btn" style="background:var(--p); color:white;">ğŸ² éšæœºèµ·ä¸€å¦</div>
        <div onclick="showList()" class="btn">ğŸ“š è¯¦ç»†å…­åå››å¦åå½•</div>
    </div>

    <div id="list">
        <h3>å…­åå››å¦æ£€ç´¢</h3>
        <div id="gua-grid" class="grid"></div>
        <div class="nav" onclick="goHome()">è¿”å›é¦–é¡µ</div>
    </div>

    <div id="detail">
        <h2 id="d-name"></h2>
        <div class="section">
            <h3>ğŸŒŸ æ ¸å¿ƒæ™ºæ…§ (æ¢å†¬æ·±åº¦è§£è¯»)</h3>
            <p id="d-quote" style="white-space: pre-wrap;"></p>
        </div>
        <div class="section">
            <h3>ğŸ” è§£å¦å®æˆ˜æ‰‹å†Œ</h3>
            <p><strong>èƒ½é‡/å¤„å¢ƒï¼š</strong><br><span id="d-state"></span></p>
            <p><strong>é¿å‘/æé†’ï¼š</strong><br><span id="d-warn"></span></p>
            <p><strong>è¡ŒåŠ¨å»ºè®®ï¼š</strong><br><span id="d-advice"></span></p>
        </div>
        <div class="section">
            <h3>ğŸ“œ å…­çˆ»è¯¦è§£</h3>
            <div id="d-yao"></div>
        </div>
        <div class="section" style="background:#fffef0;">
            <h3>ğŸ“ å®æˆ˜è®°å½•ä¸æ„Ÿæ‚Ÿ</h3>
            <textarea id="user-note" placeholder="ç‚¹å‡»è¿™é‡Œè¾“å…¥ä½ çš„è§£å¦æ¡ˆä¾‹æˆ–å¤ä¹ å¿ƒæ³•..."></textarea>
            <button class="save-btn" onclick="saveNote()">ä¿å­˜åˆ°æ‰‹æœºæœ¬åœ°</button>
            <p id="status" style="font-size:12px; color:green; text-align:center;"></p>
        </div>
        <div class="nav" onclick="goHome()">è¿”å›é¦–é¡µ</div>
    </div>
</div>

<script src="data.js"></script>
<script>
    let currentId = "";
    function init() {
        const grid = document.getElementById('gua-grid');
        grid.innerHTML = "";
        for (let i = 1; i <= 64; i++) {
            let id = i.toString().padStart(2, '0');
            let card = document.createElement('div');
            card.className = 'card';
            card.innerText = guaData[id] ? guaData[id].name : id + " å¾…æ›´æ–°";
            card.onclick = () => showDetail(id);
            grid.appendChild(card);
        }
    }
    function showDetail(id) {
        const data = guaData[id];
        if (!data) { alert("è¯¥å¦è±¡è¯¦ç»†å†…å®¹æ­£åœ¨æ•´ç†ä¸­ï¼Œè¯·ç­‰å¾…ä¸‹ä¸€æ‰¹æ›´æ–°ï¼"); return; }
        currentId = id;
        document.getElementById('home').className = "";
        document.getElementById('list').className = "";
        document.getElementById('detail').className = "active";
        document.getElementById('d-name').innerText = data.name;
        document.getElementById('d-quote').innerText = data.quote;
        document.getElementById('d-state').innerText = data.state;
        document.getElementById('d-warn').innerText = data.warn;
        document.getElementById('d-advice').innerText = data.advice;
        document.getElementById('d-yao').innerHTML = data.yao.map(y => `<div class="yao-item">${y}</div>`).join('');
        document.getElementById('user-note').value = localStorage.getItem('yj_note_' + id) || "";
        window.scrollTo(0,0);
    }
    function showRandom() { const keys = Object.keys(guaData); showDetail(keys[Math.floor(Math.random()*keys.length)]); }
    function showList() { document.getElementById('home').className = ""; document.getElementById('detail').className = ""; document.getElementById('list').className = "active"; }
    function goHome() { document.getElementById('home').className = "active"; document.getElementById('detail').className = ""; document.getElementById('list').className = ""; }
    function saveNote() { 
        localStorage.setItem('yj_note_' + currentId, document.getElementById('user-note').value);
        document.getElementById('status').innerText = "å·²ä¿å­˜ï¼å³ä½¿å…³é—­ç½‘é¡µä¹Ÿä¸ä¼šä¸¢å¤±ã€‚";
        setTimeout(() => document.getElementById('status').innerText="", 2000);
    }
    window.onload = init;
</script>
</body>
</html>
